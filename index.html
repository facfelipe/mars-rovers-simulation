<html>
    <head>
        <title>Mars Rover Simulator</title>

        <link rel="stylesheet" href="style.css">

        <script type="module">

            import bootstrap from "./index.js";

            function handleSubmitLauchingForm(event, simulator) {
                event.preventDefault();

                const data = new FormData(event.target);
                const props = Object.fromEntries(data);

                simulator.launchRover([
                    props.landing_position,
                    props.instruction
                ]);
            }
            
            const ready = () => {

                bootstrap.setPlateauElementGetter(() => document.getElementById('plateau'));

                const simulator = bootstrap.build();

                const launchingForm = document.getElementById('launch-rover-form');

                launchingForm.addEventListener('submit', (event) => handleSubmitLauchingForm(event, simulator));
            }

            document.addEventListener('DOMContentLoaded', ready);

        </script>        

    </head>

    <boody>

        <div class="container">
            <div id="plateau"> 
                <!-- Dynamic content -->
            </div>
        </div>
        
        <div class="container">

            <div id="controls">
                <h2>Welcome to Mars Rover Simulator</h2>
                <hr>
                <h3>Launch a Rover</h3>

                <form id="launch-rover-form">

                    <div>
                        <label for="landing_position">Landing Position</label>
                        <input name="landing_position" placeholder="1 2 N">
                    </div>
                    <div>
                        <label for="instruction">Movement Sequence</label>
                        <input name="instruction" placeholder="LMLMLMLMM">
                    </div>
                    <button>Launch!</button>
                </form>

            </div>

        </div>

    </boody>

</html>
